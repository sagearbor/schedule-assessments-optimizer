graph TD
    A[User] -->|Upload Schedule CSV/JSON| B[Frontend UI<br/>Port 3040]
    B -->|Submit for Optimization| C[Backend API<br/>Port 8040]
    C -->|Request Analysis| M[Real MCP Server<br/>Port 8210<br/>EXTERNAL]
    M -->|Complexity Score| C
    C -->|Apply Rules| D[Rules Engine<br/>32+ Suggestions]
    D -->|Calculate Burden| E[Burden Calculator]
    E -->|Return Results| C
    C -->|Optimized Schedule| B
    B -->|Display Bar Charts| A

    style A fill:#e1f5fe,stroke:#01579b
    style B fill:#fff3e0,stroke:#e65100
    style C fill:#f3e5f5,stroke:#4a148c
    style D fill:#e8f5e9,stroke:#1b5e20
    style E fill:#fce4ec,stroke:#880e4f
    style M fill:#ffebee,stroke:#c62828,stroke-width:3px